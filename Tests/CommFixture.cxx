///////////////////////////////////////////////////////////////////////////////
//////////////////////////////// INCLUDES /////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

#include "Utils.h"
#include "LoggerMock.h"
#include "gmock/gmock.h"
#include "CommFixture.hxx"

///////////////////////////////////////////////////////////////////////////////
//////////////////////////////// FUNCTIONS ////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

TEST_F (CommFixture, CheckThatSendOrReceiveCanBeChoosed)
{
   // LOGW (MODULE, "CheckThatSendOrReceiveCanBeChoosed");

    EXPECT_CALL (CommMock, send    ()).Times (TWO);
    EXPECT_CALL (CommMock, receive ()).Times (TWO);

    for (uint8_t iteration = ZERO; iteration < FOUR; iteration++)
    {
        CommMock.Process ();

        if ((iteration == ZERO) || (iteration == TWO))
        {
            CommMock.SetState (Communication::EState::eSend);
        }
        else
        {
            CommMock.SetState (Communication::EState::eReceive);
        }
    }
}

///////////////////////////////////////////////////////////////////////////////
/////////////////////////////// END OF FILE ///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////